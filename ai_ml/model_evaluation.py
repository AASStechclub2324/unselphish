import pickle


def execute_spear_models(text, actual_percent):
    all_errors = []
    print("ML Models runnning......")
    for index in range(len(text)):
        msg = text[index]
        msg = [msg]
        total_percent = 0
        spam_count = 0
        ham_count = 0
        all_percent = []

        for i in range(1,5):
            model = pickle.load(open(fr'C:\Users\Anutosh\Unselphish-root\Unselphish\ai_ml\model_{i}.sav', 'rb'))
            
            prediction = model.predict(msg)
            pred_percent = model.predict_proba(msg)
            percent = pred_percent[0][0]*100
            all_percent.append(percent)

        print(all_percent)
        error = analyze_models(all_percent, actual_percent)
        all_errors.append(error)
        print(all_errors)


def analyze_models(all_percent, actual_percent):
    reports = []
    errors = []
    for percent in all_percent:
        index = all_percent.index(percent)
        error = abs(actual_percent[index]-percent)
        errors.append(error)
        report = {f'model {index}': error}
        reports.append(report)

    final_index = errors.index(min(errors))
    model_no = final_index
    print("min error model", model_no)
    for report in reports:
        if list(report.keys())[0] == f"model {model_no}":
            return report
        else:
            continue    



if __name__ == '__main__':
    msg = [r"""Subject: this web site is your internet gold mine $ $ $ remove instructions below . visit our web site at : http : / / www . interwise . cc this web site is your internet gold mine $ $ $ unlimited toll free tech support for all our products imc is the largest internet software company in the country we carry all internet software programs available and we guarantee to beat any price ! call 808-876 - 1550 the cutting edge of e-mail technology : " express mail server " from imc for only $ 275 for a limited time only ! this is the best of all e-mail programs , we know we have tried them all . if your reading this message , that only proves it works you will not find it anywhere for less you can download a demo for free from our full service web site , complete with step by step instructional tutorial ! try before you buy ! we know you will love it ! it 's a bulk e-mailers dream come true , at last ! the same software goes for $ 695 . 00 ! you can also get it for $ 495 . 00 from l . s . enterprises you can call : 808-876 - 1550 and get more information or order a copy today for $ 275 ( for a limited time only ) . or fax your order / info request to : ( 808 ) 878-6869 ( include your name , phone number , e-mail address ) visit our web site at : http : / / www . interwise . cc ( if you can't log into the site just call us , sometime the site is overloaded with hits ) we also have 60 million e-mail addresses and an excellent " remove list " service available for only $ 99 . we accept all major credit cards : visa * master card * american express * discover card we can also accept checks by fax ! simply fax your check to : 808-878 - 6869 so do n't hesitate , call today this offer is for a limited time only ! what is express mail server ? express mail server ( ems ) bulk e-mail software is the only thing that works . ems transforms your computer into a personal mail server . with no additional hardware , ems software will give you complete control of your mailings , because the mail you send will originate from your computer and be delivered directly into the mailbox of your recipient . since the mail originates from your computer , it is no longer necessary to use your internet service provider 's mail server . when you use the previous generation stealth or cloaking type programs , they work by uploading your mail to your provider 's mail server . they can also be programmed to send mail through other providers mail servers without authorization ( this is considered theft of service ) . the problem is , the previous generation stealth type programs upload the messages faster than these mail servers can process them . many times this causes a provider 's mail server to bog down and crash . obviously , this will make providers furious with you . furthermore , you may think that you are sending hundreds of thousands of messages , unfortunately , most of it simply gets filtered and deleted by the mail server . you are lucky to get 10 % - 20 % of that mail delivered . with ems software your computer emulates a mail server and you actually control and watch all your mail being delivered piece by piece . there is a 100 % delivery rate with this program anywhere on the internet . we did say 100 % delivery rate to any internet email addresses . a bold claim but it is true . this is the latest technical advance in bulk email since the advent of the stealth type programs . this program verifies domains and validity of email addresses before sending mail . this dramatically reduces your bounced back undeliverables . bounced back undeliverables can sure bog down a server . you can also control where you want any bounced back mail to go . it can go to any email address you want with ems . ems can work with any dial up internet account , ( aol is not considered a dial up internet account ) an isdn line or a t - 1 or t - 3 . it runs on windows 95 or nt . we have not heard of any person losing a dial up account with this software . one reason bulk email is so frowned upon with numerous isp 's ( internet service providers ) is people try to send as much mail as they can , as quick as they can and crash the mail server of the isp . this won't happen with ems software since you do n't since you do n't use the mail server of the isp to send your mail . the program actually sends the mail directly from your computer , which is now , a bona fide mail server , to the recipients mail server avoiding any potential blocks that would prevent you from reaching those on your mailing list . you do not have to " forge " headers or randomize anything to have 100 % of your mail delivered , although the program does allow for randomization and customizing of headers . you can send mail omitting the " to " " from " and " reply to " portions of your headers . want to send out your messages in color . this is not a problem with ems . just select a font color with your mouse , and then click on a background color as well . want to make your font bold or put it into italics , just point and click . want your message centered or shifted left or right , once again just point and click . unlike all of the others , ( which are all the same , but go by different names ) this software is very straightforward and easy to use . if you can log on to aol , you already know more about computers than you 'd need to use ems . we also provide technical support by phone to answer any questions you may have . ems works with any windows 95 or nt computer . it requires no additional hardware or software . the ems software sends at speeds up to 80 , 000 messages per hour delivered using a modest pentium and a 28 . 8 modem . rates will dramatically increase with an isdn or cable modem and of course with a t - 1 they will be even faster . if you want to take advantage of this breakthrough in bulk email technology give us a call on the number below . we do n't plan on repeat mailings for this product so take advantage of this opportunity . the cost to you is $ 275 . 00 ! money well spent if you consider that you can buy stealth ( or the many others like it . . . they all operate the same way ) for $ 400 . you might be happy with stealth if you do n't mind frequent loss of dial-up accounts , and lot of complaints . not getting a lot of your mail delivered due to blocks and crashed mail servers deleting your mail , along with the resulting low response rate from your mailings , all of which defeated the purpose of e-mailing in the first place ! few people are aware of this new technology , so you are already leaps and bounds ahead of any competition . using this , you can sell anything you wish , over and over . also , consider that you may decide to offer a mailing service to others . you ' ve probably gotten e-mails that claim they can send your advertisement e-mail for a cost of $ 200 per 100 , 000 . what most people do n't realize is that only 20 or 30 of the mail they pay these people to get sent actually gets delivered ! this mailing service is very profitable , and using this software , you can advertise that service to millions for free ! we also have cd roms with 60 million addresses to help you start . with your purchase , visit our web site at : http : / / www . interwise . cc ( if you can't log into the site just call us , sometime the site is overloaded with hits ) call i . m . c at : phone : ( 808 ) 876-1550 fax : ( 808 ) 878-6869 and place your order today while supplies last and we ' ll be happy to send you a demo copy and answer any questions you may have . or call us and we will give you our full service web site addresses * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * to be removed from our mailing list or to be added to our " global remove list " simply go to : http : / / www . ctct . com all remove requests are respectfully processed immediately""", r"""Subject: free music , audio books , news , and software
 
 listen up ! every day thousands of music lovers , news hounds , book worms and information junkies are downloading free audio over the internet . it 's fast , easy and totally free ! would you like to join them ? click a highlighted link below to check it out for yourself ! http : / / www . mis-soft . com / rtr2 . cgi ? awy = 980611 = tp1 = vbanaqeanvsuprqpnpphx ( if your mail reader does not support clickable links , copy the url into your web browser . ) check out these fun and informative free audio clips that are only one-click away . - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - music : click on the highlighted url below to go there now ! http : / / www . mis-soft . com / rtr2 . cgi ? awy = 980611 = mc4 = vbanaqeanvsuprqpnpphx with a total of 10 music categories , including : jazz , new age , reggae , popular , classical , and rock & roll - - you ' ll be sure to find something to tap your mouse to . miranda lee richards - - have you heard her yet ? check out the " unsigned bands " area of the music section to personally discover today 's up-and - coming artists . - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - audio books : click on the highlighted url below to go there now ! http : / / www . mis-soft . com / rtr2 . cgi ? awy = 980611 = bk2 = vbanaqeanvsuprqpnpphx download and listen to a wide range of fiction , non fiction , best sellers and classics all free . today 's feature audio book is " t . rex and the crater of doom " . join berkeley geologist walter alverez , as he tells the tale of an asteroid larger than mt . everest that slammed into the earth , forcing the eventual extinction of dinosaurs from our planet . - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - audio casts : click on the highlighted url below to go there now ! http : / / www . mis-soft . com / rtr2 . cgi ? awy = 980611 = cs3 = vbanaqeanvsuprqpnpphx make a daily ritual of downloading fun and informative clips like : old time radio - - experience the radio broadcasts of old like " gunsmoke " , " the lone ranger " , and " dimension x " as they return to life with the same intrigue and suspense that captured the imagination of an entire generation . star date - - get to know your universe a little better with stardate - a fact filled guide to the night sky from the mcdonald douglas observatory . - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - audio news : click on the highlighted url below to go there now ! http : / / www . mis-soft . com / rtr2 . cgi ? awy = 980611 = nw5 = vbanaqeanvsuprqpnpphx npr 's morning edition - - keep informed with " morning edition " from national public radio . bob edwards hosts this popular daily news show that offers in-depth reporting and analysis of the days news and events . do n't forget to check out newseek , ap , cnet radio , and 24 - hour satellite news - - all free . - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - free audiowiz software listen whenever you want audiowiz will let you really take control of your audio world . the cd - like interface and the single-click download features will have you up and running in no time . it 's real fast , and it ' s free ! click a highlighted link below to get audiowiz for free , and to check out all of the great free audio . http : / / www . mis-soft . com / rtr2 . cgi ? awy = 980611 = in6 = vbanaqeanvsuprqpnpphx ( if your mail reader does not support clickable links , copy the url into your web browser . ) p . s . the audio selection keeps growing did we mention free news on the hour ? the latest , hottest business and national news - - direct from our satellite feed to your desktop via free audiowiz software . p . p . s . : did we mention that all of these timely , exciting , and highly relevant digital audio clips are always yours to download for free ? click a highlighted link below to check it out now ! http : / / www . mis-soft . com / rtr2 . cgi ? awy = 980611 = en7 = vbanaqeanvsuprqpnpphx ( if your mail reader does not support clickable links , please copy the url into your web browser . ) * audiowiz also requires 16mb ram , 10mb available hard disk space , ms internet explorer 3 . 0 or netscape navigator 3 . 0 , and a pc with audio capability . - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - if you received this message in error , or do not wish to receive further updates and offers , please : click below to remove yourself from this mailing . http : / / www . mis-soft . com / cgi-bin / rem ? vbanaqeanvsuprqpnpphx or reply via email with " remove " as the subject . copyright 1998 asset max""", r"""Subject: a theory of predicates
 
 a theory of predicates ackerman , farrell ( university of california , san diego ) and webelhuth , gert ( university of north carolina , chapel hill ) ; a theory of predicates ; isbn : 1-57586 - 087 - 2 ( cloth ) , 1-57586 - 086 - 4 ( paper ) ; 402 pp . csli publications 1998 : http : / / csli-www . stanford . edu / publications / email : pubs @ roslin . stanford . edu in this work two linguists from different theoretical paradigms develop a new general theory of natural language predicates . this theory is capable of addressing a broad range of issues concerning ( complex ) predicates , many of which remain unresolved in previous theoretical proposals . grounded in empirical evidence from a wide variety of genetically and geographically unrelated languages ( german , hungarian , fox , nenets , tzotzil , malayalam , among others ) , this new theory synthesizes conceptual and representational assumptions from several different theoretical traditions . the authors focus on cross-linguistically recurring patterns of predicate formation where identical contentive notions ( i . e . , lexical semantic , grammatical function , and morphosyntactic information ) are expressed by predicates consisting of a single morphological word or by combinations of independent words that need not form a single syntactic unit . they provide a detailed implementation of their theory for german tense-aspect , passive , causative , and verb-particle predicates . in addition , the authors discuss extensions of these representative analyses to the same predicate constructions in other languages . beyond providing a formalism for the analysis of language-particular predicates , they demonstrate how the basic theoretical mechanisms they develop can be employed to explain universal tendencies of predicate formation . for this purpose , ackerman and webelhuth introduce the construct ` grammatical archetype ' into linguistic theory , relating universal patterns of predicate formation to language-particular patterns in a principled fashion . this book will be of interest to linguists and grammarians from any generative , cognitive / functional , or traditional perspective . in addition , it is accessible to interested philosophers , psycholinguists , cognitive scientists , computational linguists , anthropological linguists , and philologists . * * * * * * * * * * * * * * * * * * * * * * * * * csli publications ventura hall stanford university stanford , ca 94305-4115 telephone ( 650 ) 723-1839 fax ( 650 ) 725-2166 http : / / csli-www . stanford . edu / publications""", r"""Subject: understanding syntax ( update )
 
 understanding syntax tallerman , maggie ( university of durham , uk ) ; understanding syntax ; published september 1998 c . 192pp pb 0 340 60377 1 c . 12 . 99 / us $ 19 . 95 hb 0 340 70000 9 c . 35 . 00 / us $ 60 . 00 arnold publishing ( american edition is co-published with oup ) provides a complete introduction to the main categories and constructions associated with sentence structure - the syntactic component of the grammar of human language . assuming no prior knowledge of linguistics , the book discusses and illustrates all the major terms and concepts . contents : what is syntax ? / words belong to different classes / looking inside sentences / head words and phrases / how do we identify constituents ? / relationship within the clause / syntactic processes . readership : undergraduates in linguistics tel : + 44 ( 0 ) 171 873 6355 fax : + 44 ( 0 ) 171 873 6325 e - mail : milly . neate @ hodder . co . uk
"""]

    act_percent = [100, 100, 0 , 0]

    execute_spear_models(msg, actual_percent=act_percent)


    